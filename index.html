
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Google Takvim Entegrasyonu</title>
  <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
  <h2>Google Takvim Testi</h2>
  <button onclick="googleTakvimeEtkinlikEkle()">ğŸ“… Takvime Etkinlik Ekle</button>
  <p id="sonuc"></p>

  <script>
    const CLIENT_ID = "270944409412-g5p51bra8t2cedq1h3mrdobd4dtm871o.apps.googleusercontent.com";
    const SCOPES = "https://www.googleapis.com/auth/calendar";

    function googleTakvimeEtkinlikEkle() {
      gapi.load("client:auth2", () => {
        gapi.client.init({
          clientId: CLIENT_ID,
          scope: SCOPES,
          ux_mode: "popup"
        }).then(() => {
          const authInstance = gapi.auth2.getAuthInstance();
          if (!authInstance.isSignedIn.get()) {
            authInstance.signIn().then(ekleEtkinlik);
          } else {
            ekleEtkinlik();
          }
        });
      });
    }

    function ekleEtkinlik() {
      const etkinlik = {
        summary: "ğŸ“· FotoÄŸraf Ã‡ekimi - Test Etkinlik",
        description: "Bu etkinlik Google Takvim API ile eklendi.",
        start: {
          date: "2025-06-18",
          timeZone: "Europe/Istanbul"
        },
        end: {
          date: "2025-06-18",
          timeZone: "Europe/Istanbul"
        },
        colorId: "9"
      };

      gapi.client.calendar.events.insert({
        calendarId: "primary",
        resource: etkinlik
      }).then(response => {
        document.getElementById("sonuc").innerText = "âœ… Etkinlik baÅŸarÄ±yla eklendi!";
        console.log("Etkinlik:", response);
      }).catch(error => {
        document.getElementById("sonuc").innerText = "âŒ Hata: " + error.result.error.message;
        console.error("Takvim hatasÄ±:", error);
      });
    }
  </script>
</body>
</html>
